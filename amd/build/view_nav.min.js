define(["jquery","core/custom_interaction_events","block_myoverview_term_filter/repository","block_myoverview_term_filter/view","block_myoverview_term_filter/selectors"],function(a,b,c,d,e){var f={FILTERS:'[data-region="filter"]',FILTER_OPTION:"[data-filter]",DISPLAY_OPTION:"[data-display-option]",TERM_OPTION:"[data-term-option]"},g=function(a,b){var d=null;d="display"===a?"block_myoverview_term_filter_user_view_preference":"sort"===a?"block_myoverview_term_filter_user_sort_preference":"block_myoverview_term_filter_user_grouping_preference",c.updateUserPreferences({preferences:[{type:d,value:b}]})},h=function(a){var b=a.find(e.courseView.region),c=a.find("#termdropdown"),d=b.attr("data-term");c.find('[data-value="'+d+'"]').removeClass("active");var f=b.attr("data-grouping"),g=c.attr("data-default-"+f);b.attr("data-term",g),c.find('[data-value="'+g+'"]').addClass("active"),c.find("#selectedterm").text(c.find('[data-value="'+g+'"]').text())},i=function(c){var i=c.find(f.FILTERS);b.define(i,[b.events.activate]),i.on(b.events.activate,f.FILTER_OPTION,function(b,f){var i=a(b.target);if(!i.hasClass("active")){var j=i.attr("data-filter"),k=i.attr("data-pref");c.find(e.courseView.region).attr("data-"+j,i.attr("data-value")),h(c),g(j,k),d.init(c),f.originalEvent.preventDefault()}}),b.define(i,[b.events.activate]),i.on(b.events.activate,f.TERM_OPTION,function(b,f){var g=a(b.target);g.hasClass("active")||(c.find(e.courseView.region).attr("data-term",g.attr("data-value")),d.init(c),f.originalEvent.preventDefault())}),b.define(i,[b.events.activate]),i.on(b.events.activate,f.DISPLAY_OPTION,function(b,f){var h=a(b.target);if(!h.hasClass("active")){var i=h.attr("data-display-option"),j=h.attr("data-pref");c.find(e.courseView.region).attr("data-display",h.attr("data-value")),g(i,j),d.reset(c),f.originalEvent.preventDefault()}})},j=function(b){b=a(b),i(b),h(b)};return{init:j}});